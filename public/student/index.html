<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>In-Class Attendance</title>
  <link rel="stylesheet" href="/student/styles.css">
</head>
<body>
  <div class="page">
    <header class="page__header">
      <div>
        <p class="session-label" id="sessionLabel">Live session</p>
      </div>
    </header>

    <main class="page__grid">
      <section class="card scanner" id="scannerCard">
        <h2>Step 2 – Verify attendance</h2>
        <p class="muted small step-note">Press the Start scanning button and use the scanner below to read the verification QR-code in the center of the screen.</p>
        <div class="scanner-placeholder" id="scannerPlaceholder">
          <p>Tap “Start scanning” to open the camera.</p>
          <p class="muted small">If the QR is not detected quickly, wait for the next refresh while keeping the QR-code in the frame.</p>
        </div>
        <div class="camera-frame" id="cameraFrame" hidden>
          <video id="video" autoplay muted playsinline webkit-playsinline></video>
          <div class="camera-overlay">
            <div class="bracket top-left"></div>
            <div class="bracket top-right"></div>
            <div class="bracket bottom-left"></div>
            <div class="bracket bottom-right"></div>
            <p class="camera-hint" id="cameraHint">Align the QR inside the frame</p>
          </div>
        </div>
        <button class="primary" id="scanBtn">Start scanning</button>
        <p class="muted small" id="scannerStatus" role="status" aria-live="polite"></p>
        <div class="status-card" id="statusCard" hidden>
          <span class="status-icon" id="statusIcon">✔</span>
          <div class="status-copy">
            <h3 id="statusHeading">Presence verified</h3>
            <p class="muted" id="statusMessage">Great! Now enter your student ID to finish the check-in.</p>
          </div>
        </div>
      </section>

      <section class="card form" id="idCard" hidden>
        <h2>Finalise your check-in</h2>
        <p class="muted small">by submitting your student ID</p>
        <div class="id-input-row">
          <input type="text" id="student-id" maxlength="8" placeholder="Enter your student ID" inputmode="numeric" pattern="9\d{7}">
          <button class="primary" id="submit-btn">Submit</button>
        </div>
      </section>
    </main>
  </div>

  <script src="/student/jsqr.min.js"></script>
  <script src="/student/student.js"></script>
</body>
</html>
